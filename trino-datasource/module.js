define(["@emotion/css","@grafana/data","@grafana/runtime","@grafana/ui","lodash","react","rxjs"],((e,t,r,n,o,i,s)=>(()=>{var l=[e=>{"use strict";e.exports=i},e=>{"use strict";e.exports=n},e=>{"use strict";e.exports=t},e=>{"use strict";e.exports=r},(e,t,r)=>{var n,o,i,s,l,a,u,f,c,p,d=r(1),y=r(0),g=(n=y)&&"object"==typeof n&&"default"in n?n.default:n,m=r(2),h=r(3),E=r(10),v=function(){return(v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function q(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function T(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function l(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,l)}a((n=n.apply(e,t||[])).next())}))}function w(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}function b(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function O(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function S(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function R(e,r){var n,o,i,s=null==e?void 0:e.getPreviousNonWhiteSpaceToken(),l=null==e?void 0:e.getPreviousKeyword(),a=null===(i=null==e?void 0:e.getPreviousNonWhiteSpaceToken())||void 0===i?void 0:i.is(t.iv.Operator,"/"),u=r.list(),f=[];try{for(var c=b(u),p=c.next();!p.done;p=c.next()){var d=p.value;d.resolve(e,null!=l?l:null,null!=s?s:null,Boolean(a))&&f.push(d.id)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}return 0===f.length?[t.fC.Unknown]:f}(o=t.$M||(t.$M={}))[o.Comparison=0]="Comparison",o[o.Logical=1]="Logical",(i=t.mB||(t.mB={}))[i.Value=0]="Value",i[i.Filter=1]="Filter",i[i.Group=2]="Group",i[i.Column=3]="Column",i[i.Table=4]="Table",(s=t.iv||(t.iv={})).Parenthesis="delimiter.parenthesis.sql",s.Whitespace="white.sql",s.Keyword="keyword.sql",s.Delimiter="delimiter.sql",s.Operator="operator.sql",s.Identifier="identifier.sql",s.IdentifierQuote="identifier.quote.sql",s.Type="type.sql",s.Function="predefined.sql",s.Number="number.sql",s.String="string.sql",s.Variable="variable.sql",(l=t.fC||(t.fC={})).Unknown="unknown",l.SelectKeyword="selectKeyword",l.WithKeyword="withKeyword",l.AfterSelectKeyword="afterSelectKeyword",l.AfterSelectArguments="afterSelectArguments",l.AfterSelectFuncFirstArgument="afterSelectFuncFirstArgument",l.SelectAlias="selectAlias",l.AfterFromKeyword="afterFromKeyword",l.AfterTable="afterTable",l.SchemaFuncFirstArgument="schemaFuncFirstArgument",l.SchemaFuncExtraArgument="schemaFuncExtraArgument",l.FromKeyword="fromKeyword",l.AfterFrom="afterFrom",l.WhereKeyword="whereKeyword",l.WhereComparisonOperator="whereComparisonOperator",l.WhereValue="whereValue",l.AfterWhereFunctionArgument="afterWhereFunctionArgument",l.AfterGroupByFunctionArgument="afterGroupByFunctionArgument",l.AfterWhereValue="afterWhereValue",l.AfterGroupByKeywords="afterGroupByKeywords",l.AfterGroupBy="afterGroupBy",l.AfterOrderByKeywords="afterOrderByKeywords",l.AfterOrderByFunction="afterOrderByFunction",l.AfterOrderByDirection="afterOrderByDirection",l.AfterIsOperator="afterIsOperator",l.AfterIsNotOperator="afterIsNotOperator",l.AfterSchema="afterSchema",(a=t.is||(t.is={})).Schemas="schemas",a.Tables="tables",a.Columns="columns",a.SelectKeyword="selectKeyword",a.WithKeyword="withKeyword",a.FunctionsWithArguments="functionsWithArguments",a.FromKeyword="fromKeyword",a.WhereKeyword="whereKeyword",a.GroupByKeywords="groupByKeywords",a.OrderByKeywords="orderByKeywords",a.FunctionsWithoutArguments="functionsWithoutArguments",a.LimitKeyword="limitKeyword",a.SortOrderDirectionKeyword="sortOrderDirectionKeyword",a.ComparisonOperators="comparisonOperators",a.LogicalOperators="logicalOperators",a.SelectMacro="selectMacro",a.TableMacro="tableMacro",a.FilterMacro="filterMacro",a.GroupMacro="groupMacro",a.BoolValues="boolValues",a.NullValue="nullValue",a.NotKeyword="notKeyword",a.TemplateVariables="templateVariables",a.StarWildCard="starWildCard",(u=t.G8||(t.G8={})).High="a",u.MediumHigh="d",u.Medium="g",u.MediumLow="k",u.Low="q",(f=t.cm||(t.cm={}))[f.Method=0]="Method",f[f.Function=1]="Function",f[f.Constructor=2]="Constructor",f[f.Field=3]="Field",f[f.Variable=4]="Variable",f[f.Class=5]="Class",f[f.Struct=6]="Struct",f[f.Interface=7]="Interface",f[f.Module=8]="Module",f[f.Property=9]="Property",f[f.Event=10]="Event",f[f.Operator=11]="Operator",f[f.Unit=12]="Unit",f[f.Value=13]="Value",f[f.Constant=14]="Constant",f[f.Enum=15]="Enum",f[f.EnumMember=16]="EnumMember",f[f.Keyword=17]="Keyword",f[f.Text=18]="Text",f[f.Color=19]="Color",f[f.File=20]="File",f[f.Reference=21]="Reference",f[f.Customcolor=22]="Customcolor",f[f.Folder=23]="Folder",f[f.TypeParameter=24]="TypeParameter",f[f.User=25]="User",f[f.Issue=26]="Issue",f[f.Snippet=27]="Snippet",(c=t.a7||(t.a7={}))[c.KeepWhitespace=1]="KeepWhitespace",c[c.InsertAsSnippet=4]="InsertAsSnippet",(p=t.je||(t.je={})).Builder="builder",p.Code="code";var A=function(e,r,n,o,i){return T(void 0,void 0,void 0,(function(){var s,l,a,u,f,c,p,d,y,g,m;return w(this,(function(h){switch(h.label){case 0:s=[],l=(null==r?void 0:r.isWhiteSpace())||(null==r?void 0:r.isParenthesis())||(null==r?void 0:r.isIdentifier())&&r.value.endsWith("."),a=l||!(null==r?void 0:r.range)?e.Range.fromPositions(o.position):null==r?void 0:r.range,h.label=1;case 1:h.trys.push([1,6,7,8]),u=b(S([],O(new Set(n)),!1)),f=u.next(),h.label=2;case 2:return f.done?[3,5]:(c=f.value,(p=i.getIfExists(c))?[4,p.suggestions(v(v({},o),{range:a}),e)]:[3,4]);case 3:d=h.sent(),s=S(S([],O(s),!1),O(d.map((function(e){return function(e,r,n){return void 0===n&&(n={}),v({label:e,insertText:e,kind:t.cm.Field,sortText:t.G8.Medium,range:r},n)}(e.label,a,v({kind:e.kind},e))}))),!1),h.label=4;case 4:return f=u.next(),[3,2];case 5:return[3,8];case 6:return y=h.sent(),g={error:y},[3,8];case 7:try{f&&!f.done&&(m=u.return)&&m.call(u)}finally{if(g)throw g.error}return[7];case 8:return[2,Promise.resolve(s)]}}))}))},C=function(){return[{id:t.fC.SelectKeyword,name:t.fC.SelectKeyword,kind:[t.is.SelectKeyword]},{id:t.fC.WithKeyword,name:t.fC.WithKeyword,kind:[t.is.WithKeyword]},{id:t.fC.AfterSelectKeyword,name:t.fC.AfterSelectKeyword,kind:[t.is.StarWildCard,t.is.FunctionsWithArguments,t.is.Columns,t.is.SelectMacro]},{id:t.fC.AfterSelectFuncFirstArgument,name:t.fC.AfterSelectFuncFirstArgument,kind:[t.is.Columns]},{id:t.fC.AfterGroupByFunctionArgument,name:t.fC.AfterGroupByFunctionArgument,kind:[t.is.Columns]},{id:t.fC.AfterWhereFunctionArgument,name:t.fC.AfterWhereFunctionArgument,kind:[t.is.Columns]},{id:t.fC.AfterSelectArguments,name:t.fC.AfterSelectArguments,kind:[t.is.Columns]},{id:t.fC.AfterFromKeyword,name:t.fC.AfterFromKeyword,kind:[t.is.Schemas,t.is.Tables,t.is.TableMacro]},{id:t.fC.AfterSchema,name:t.fC.AfterSchema,kind:[t.is.Tables,t.is.TableMacro]},{id:t.fC.SelectAlias,name:t.fC.SelectAlias,kind:[t.is.Columns,t.is.FunctionsWithArguments]},{id:t.fC.FromKeyword,name:t.fC.FromKeyword,kind:[t.is.FromKeyword]},{id:t.fC.AfterFrom,name:t.fC.AfterFrom,kind:[t.is.WhereKeyword,t.is.GroupByKeywords,t.is.OrderByKeywords,t.is.LimitKeyword]},{id:t.fC.AfterTable,name:t.fC.AfterTable,kind:[t.is.WhereKeyword,t.is.GroupByKeywords,t.is.OrderByKeywords,t.is.LimitKeyword]},{id:t.fC.WhereKeyword,name:t.fC.WhereKeyword,kind:[t.is.Columns,t.is.FilterMacro,t.is.TemplateVariables]},{id:t.fC.WhereComparisonOperator,name:t.fC.WhereComparisonOperator,kind:[t.is.ComparisonOperators]},{id:t.fC.WhereValue,name:t.fC.WhereValue,kind:[t.is.FilterMacro,t.is.TemplateVariables]},{id:t.fC.AfterWhereValue,name:t.fC.AfterWhereValue,kind:[t.is.LogicalOperators,t.is.GroupByKeywords,t.is.OrderByKeywords,t.is.LimitKeyword,t.is.Columns,t.is.TemplateVariables]},{id:t.fC.AfterGroupByKeywords,name:t.fC.AfterGroupByKeywords,kind:[t.is.GroupMacro,t.is.Columns]},{id:t.fC.AfterGroupBy,name:t.fC.AfterGroupBy,kind:[t.is.OrderByKeywords,t.is.LimitKeyword]},{id:t.fC.AfterOrderByKeywords,name:t.fC.AfterOrderByKeywords,kind:[t.is.Columns]},{id:t.fC.AfterOrderByFunction,name:t.fC.AfterOrderByFunction,kind:[t.is.SortOrderDirectionKeyword,t.is.LimitKeyword]},{id:t.fC.AfterOrderByDirection,name:t.fC.AfterOrderByDirection,kind:[t.is.LimitKeyword]},{id:t.fC.AfterIsOperator,name:t.fC.AfterOrderByDirection,kind:[t.is.NotKeyword,t.is.NullValue,t.is.BoolValues]},{id:t.fC.AfterIsNotOperator,name:t.fC.AfterOrderByDirection,kind:[t.is.NullValue,t.is.BoolValues]}]},I=function(){function e(e,t,r,n,o){this.type=e,this.value=t,this.range=r,this.previous=n,this.next=o}return e.prototype.isKeyword=function(){return this.type===t.iv.Keyword},e.prototype.isWhiteSpace=function(){return this.type===t.iv.Whitespace},e.prototype.isParenthesis=function(){return this.type===t.iv.Parenthesis},e.prototype.isIdentifier=function(){return this.type===t.iv.Identifier},e.prototype.isString=function(){return this.type===t.iv.String},e.prototype.isNumber=function(){return this.type===t.iv.Number},e.prototype.isDoubleQuotedString=function(){return this.type===t.iv.Type},e.prototype.isVariable=function(){return this.type===t.iv.Variable},e.prototype.isFunction=function(){return this.type===t.iv.Function},e.prototype.isOperator=function(){return this.type===t.iv.Operator},e.prototype.isTemplateVariable=function(){return this.type===t.iv.Variable},e.prototype.is=function(e,t){var r=this.type===e;return void 0!==t?r&&N(e,this,t):r},e.prototype.getPreviousNonWhiteSpaceToken=function(){for(var e=this.previous;null!=e;){if(!e.isWhiteSpace())return e;e=e.previous}return null},e.prototype.getPreviousOfType=function(e,t){for(var r=this.previous;null!=r;){var n=r.type===e;if(void 0!==t?n&&N(e,r,t):n)return r;r=r.previous}return null},e.prototype.getPreviousUntil=function(e,t,r){for(var n=[],o=this.previous;null!=o;)if(t.some((function(e){return e===(null==o?void 0:o.type)})))o=o.previous;else{var i=o.type===e;if(void 0!==r?i&&N(e,o,r):i)return n;o.isWhiteSpace()||n.push(o),o=o.previous}return n},e.prototype.getNextUntil=function(e,t,r){for(var n=[],o=this.next;null!=o;)if(t.some((function(e){return e===(null==o?void 0:o.type)})))o=o.next;else{var i=o.type===e;if(void 0!==r?i&&N(e,o,r):i)return n;o.isWhiteSpace()||n.push(o),o=o.next}return n},e.prototype.getPreviousKeyword=function(){for(var e=this.previous;null!=e;){if(e.isKeyword())return e;e=e.previous}return null},e.prototype.getNextNonWhiteSpaceToken=function(){for(var e=this.next;null!=e;){if(!e.isWhiteSpace())return e;e=e.next}return null},e.prototype.getNextOfType=function(e,t){for(var r=this.next;null!=r;){var n=r.type===e;if(void 0!==t?n&&N(e,r,t):n)return r;r=r.next}return null},e}();function N(e,r,n){return e===t.iv.Keyword||e===t.iv.Operator?r.value.toLowerCase()===n.toString().toLowerCase():r.value===n}function P(e,r,n,o){var i;void 0===o&&(o="sql");for(var s=null,l=null,a=e.editor.tokenize(null!==(i=r.getValue())&&void 0!==i?i:"",o),u=0;u<a.length;u++){var f=a[u];if(!f.length&&l){var c={offset:0,type:t.iv.Whitespace,language:o,_tokenBrand:void 0};f.push(c)}for(var p=0;p<f.length;p++){c=f[p];var d=f.length>p+1?f[p+1].offset+1:r.getLineLength(u+1)+1,y={startLineNumber:u+1,startColumn:0===c.offset?0:c.offset+1,endLineNumber:u+1,endColumn:d},g=r.getValueInRange(y),m=new I(c.type,g,y,l,null);e.Range.containsPosition(y,n)&&(s=m),l&&(l.next=m),l=m}}return s}var _,L="select",D="from",x="by",M="desc",k="asc",F=["=","!="],B=S([],O(F),!1),U={comments:{lineComment:"--",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},K={defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["ABORT","ABSOLUTE","ACTION","ADA","ADD","AFTER","ALL","ALLOCATE","ALTER","ALWAYS","ANALYZE","AND","ANY","ARE","AS","ASC","ASSERTION","AT","ATTACH","AUTHORIZATION","AUTOINCREMENT","AVG","BACKUP","BEFORE","BEGIN","BETWEEN","BIT","BIT_LENGTH","BOTH","BREAK","BROWSE","BULK","BY","CASCADE","CASCADED","CASE","CAST","CATALOG","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLLATION","COLUMN","COMMIT","COMPUTE","CONFLICT","CONNECT","CONNECTION","CONSTRAINT","CONSTRAINTS","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CORRESPONDING","COUNT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATE","DAY","DBCC","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DETACH","DIAGNOSTICS","DISCONNECT","DISK","DISTINCT","DISTRIBUTED","DO","DOMAIN","DOUBLE","DROP","DUMP","EACH","ELSE","END","END-EXEC","ERRLVL","ESCAPE","EXCEPT","EXCEPTION","EXCLUDE","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTERNAL","EXTRACT","FAIL","FALSE","FETCH","FILE","FILLFACTOR","FILTER","FIRST","FLOAT","FOLLOWING","FOR","FOREIGN","FORTRAN","FOUND","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GENERATED","GET","GLOB","GLOBAL","GO","GOTO","GRANT","GROUP","GROUPS","HAVING","HOLDLOCK","HOUR","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IGNORE","IMMEDIATE","IN","INCLUDE","INDEX","INDEXED","INDICATOR","INITIALLY","INNER","INPUT","INSENSITIVE","INSERT","INSTEAD","INT","INTEGER","INTERSECT","INTERVAL","INTO","IS","ISNULL","ISOLATION","JOIN","KEY","KILL","LANGUAGE","LAST","LEADING","LEFT","LEVEL","LIKE","LIMIT","LINENO","LOAD","LOCAL","LOWER","MATCH","MATERIALIZED","MAX","MERGE","MIN","MINUTE","MODULE","MONTH","NAMES","NATIONAL","NATURAL","NCHAR","NEXT","NO","NOCHECK","NONCLUSTERED","NONE","NOT","NOTHING","NOTNULL","NULL","NULLIF","NULLS","NUMERIC","OCTET_LENGTH","OF","OFF","OFFSET","OFFSETS","ON","ONLY","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OTHERS","OUTER","OUTPUT","OVER","OVERLAPS","PAD","PARTIAL","PARTITION","PASCAL","PERCENT","PIVOT","PLAN","POSITION","PRAGMA","PRECEDING","PRECISION","PREPARE","PRESERVE","PRIMARY","PRINT","PRIOR","PRIVILEGES","PROC","PROCEDURE","PUBLIC","QUERY","RAISE","RAISERROR","RANGE","READ","READTEXT","REAL","RECONFIGURE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELATIVE","RELEASE","RENAME","REPLACE","REPLICATION","RESTORE","RESTRICT","RETURN","RETURNING","REVERT","REVOKE","RIGHT","ROLLBACK","ROW","ROWCOUNT","ROWGUIDCOL","ROWS","RULE","SAVE","SAVEPOINT","SCHEMA","SCROLL","SECOND","SECTION","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION","SESSION_USER","SET","SETUSER","SHUTDOWN","SIZE","SMALLINT","SOME","SPACE","SQL","SQLCA","SQLCODE","SQLERROR","SQLSTATE","SQLWARNING","STATISTICS","SUBSTRING","SUM","SYSTEM_USER","TABLE","TABLESAMPLE","TEMP","TEMPORARY","TEXTSIZE","THEN","TIES","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TOP","TRAILING","TRAN","TRANSACTION","TRANSLATE","TRANSLATION","TRIGGER","TRIM","TRUE","TRUNCATE","TRY_CONVERT","TSEQUAL","UNBOUNDED","UNION","UNIQUE","UNKNOWN","UNPIVOT","UPDATE","UPDATETEXT","UPPER","USAGE","USE","USER","USING","VACUUM","VALUE","VALUES","VARCHAR","VARYING","VIEW","VIRTUAL","WAITFOR","WHEN","WHENEVER","WHERE","WHILE","WINDOW","WITH","WITHIN GROUP","WITHOUT","WORK","WRITE","WRITETEXT","YEAR","ZONE"],operators:["EXCEPT","INTERSECT","UNION","APPLY","CROSS","FULL","INNER","JOIN","LEFT","OUTER","RIGHT","CONTAINS","FREETEXT","IS","NULL","PIVOT","UNPIVOT","MATCHED"],logicalOperators:["ALL","AND","ANY","BETWEEN","EXISTS","IN","LIKE","NOT","OR","SOME"],comparisonOperators:["<>",">","<",">=","<=","=","!=","&","~","^","%"],builtinFunctions:["AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","SUM","STDEV","STDEVP","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","COLLATE","COLLATIONPROPERTY","TERTIARY_WEIGHTS","FEDERATION_FILTERING_VALUE","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","CURRENT_TIMESTAMP","DATEADD","DATEDIFF","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","CHOOSE","COALESCE","IIF","NULLIF","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASE_PRINCIPAL_ID","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHAR","CHARINDEX","CONCAT","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","NCHAR","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STUFF","SUBSTRING","UNICODE","UPPER","BINARY_CHECKSUM","CHECKSUM","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","ERROR_LINE","ERROR_NUMBER","ERROR_MESSAGE","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GETANSINULL","GET_FILESTREAM_TRANSACTION_CONTEXT","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","XACT_STATE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","CHANGETABLE","CHANGE_TRACKING_CONTEXT","CHANGE_TRACKING_CURRENT_VERSION","CHANGE_TRACKING_IS_COLUMN_IN_MASK","CHANGE_TRACKING_MIN_VALID_VERSION","CONTAINSTABLE","FREETEXTTABLE","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","FILETABLEROOTPATH","GETFILENAMESPACEPATH","GETPATHLOCATOR","PATHNAME","GET_TRANSMISSION_STATUS"],builtinVariables:["@@DATEFIRST","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","@@CURSOR_ROWS","@@FETCH_STATUS","@@DATEFIRST","@@PROCID","@@ERROR","@@IDENTITY","@@ROWCOUNT","@@TRANCOUNT","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACKET_ERRORS","@@PACK_RECEIVED","@@PACK_SENT","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE"],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@templateVariables"},{include:"@macros"},{include:"@comments"},{include:"@whitespace"},{include:"@pseudoColumns"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},{include:"@schemaTable"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$|<|>|=|!|%|&|+|\|-|*|/|~|^]+/,{cases:{"@operators":"operator","@comparisonOperators":"operator","@logicalOperators":"operator","@builtinVariables":"predefined","@builtinFunctions":"predefined","@keywords":"keyword","@default":"identifier"}}]],templateVariables:[[/\$[a-zA-Z0-9]+/,"variable"]],macros:[[/\$__[a-zA-Z0-9-_]+/,"type"]],schemaTable:[[/(\w+)\./,"identifier"],[/(\w+\.\w+)/,"identifier"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],pseudoColumns:[[/[$][A-Za-z_][\w@#$]*/,{cases:{"@pseudoColumns":"predefined","@default":"identifier"}}]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/N'/,{token:"string",next:"@string"}],[/'/,{token:"string",next:"@string"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[[/BEGIN\s+(DISTRIBUTED\s+)?TRAN(SACTION)?\b/i,"keyword"],[/BEGIN\s+TRY\b/i,{token:"keyword.try"}],[/END\s+TRY\b/i,{token:"keyword.try"}],[/BEGIN\s+CATCH\b/i,{token:"keyword.catch"}],[/END\s+CATCH\b/i,{token:"keyword.catch"}],[/(BEGIN|CASE)\b/i,{token:"keyword.block"}],[/END\b/i,{token:"keyword.block"}],[/WHEN\b/i,{token:"keyword.choice"}],[/THEN\b/i,{token:"keyword.choice"}]]}},G=Object.freeze({__proto__:null,SELECT:L,FROM:D,WHERE:"where",GROUP:"group",ORDER:"order",BY:x,DESC:M,ASC:k,LIMIT:"limit",WITH:"with",AS:"as",SCHEMA:"schema",AND:"AND",OR:"OR",LOGICAL_OPERATORS:["AND","OR"],EQUALS:"=",NOT_EQUALS:"!=",COMPARISON_OPERATORS:F,STD_OPERATORS:B,conf:U,language:K}),j=function(e){var r,n=function(e){var r=function(e){var r;return null!==(r=null==e?void 0:e.getPreviousOfType(t.iv.Keyword,L))&&void 0!==r?r:null}(e);return null==r?void 0:r.getNextOfType(t.iv.Keyword,D)}(e),o=null==n?void 0:n.getNextNonWhiteSpaceToken();return(null==o?void 0:o.isVariable())||(null==o?void 0:o.isKeyword())&&(null===(r=o.next)||void 0===r?void 0:r.is(t.iv.Parenthesis,"("))?null:o},Y=function(e){var t=null==e?void 0:e.value.split(".");return 1===(null==t?void 0:t.length)?{table:t[0]}:2===(null==t?void 0:t.length)?{schema:t[0],table:t[1]}:null},W={id:"editor.action.triggerSuggest",title:""},V=new Uint8Array(16);function H(){if(!_&&!("undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _(V)}var Q=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var X=[],$=0;$<256;++$)X.push(($+256).toString(16).substr(1));function z(e,t,r){var n=(e||{}).random||(e.rng||H)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(X[e[t+0]]+X[e[t+1]]+X[e[t+2]]+X[e[t+3]]+"-"+X[e[t+4]]+X[e[t+5]]+"-"+X[e[t+6]]+X[e[t+7]]+"-"+X[e[t+8]]+X[e[t+9]]+"-"+X[e[t+10]]+X[e[t+11]]+X[e[t+12]]+X[e[t+13]]+X[e[t+14]]+X[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&Q.test(e)}(r))throw TypeError("Stringified UUID is invalid");return r}(n)}function J(e){return{label:e.name,insertText:"".concat("\\"+e.text).concat(Z(e.args)," "),insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Snippet,documentation:e.description,command:W}}function Z(e){return e?"(".concat(e.map((function(e,t){return"${".concat(t,":").concat(e,"}")})).join(", ")).concat(")"):"()"}function ee(){return[{id:t.fC.SelectKeyword,name:t.fC.SelectKeyword,resolve:function(e,r,n,o){return Boolean(null===e||e.isWhiteSpace()&&null===e.previous||e.is(t.iv.Keyword,L)||e.is(t.iv.Keyword,L)&&null===e.previous||o||e.isIdentifier()&&(o||null===(null==e?void 0:e.previous))||e.isIdentifier()&&L.startsWith(e.value.toLowerCase()))}},{id:t.fC.WithKeyword,name:t.fC.WithKeyword,resolve:function(e,r,n,o){return Boolean(null===e||e.isWhiteSpace()&&null===e.previous||e.is(t.iv.Keyword,"with")&&null===e.previous||e.isIdentifier()&&"with".toLowerCase().startsWith(e.value.toLowerCase()))}},{id:t.fC.AfterSelectKeyword,name:t.fC.AfterSelectKeyword,resolve:function(e,t,r,n){return Boolean((null==r?void 0:r.value.toLowerCase())===L)}},{id:t.fC.AfterSelectArguments,name:t.fC.AfterSelectArguments,resolve:function(e,t,r,n){return Boolean((null==t?void 0:t.value.toLowerCase())===L&&","===(null==r?void 0:r.value))}},{id:t.fC.AfterSelectFuncFirstArgument,name:t.fC.AfterSelectFuncFirstArgument,resolve:function(e,r,n,o){return Boolean(((null==r?void 0:r.value.toLowerCase())===L||"as"===(null==r?void 0:r.value.toLowerCase()))&&((null==n?void 0:n.is(t.iv.Parenthesis,"("))||(null==e?void 0:e.is(t.iv.Parenthesis,"()"))))}},{id:t.fC.AfterWhereFunctionArgument,name:t.fC.AfterWhereFunctionArgument,resolve:function(e,r,n,o){return Boolean((null==r?void 0:r.is(t.iv.Keyword,"where"))&&((null==n?void 0:n.is(t.iv.Parenthesis,"("))||(null==e?void 0:e.is(t.iv.Parenthesis,"()"))))}},{id:t.fC.AfterGroupBy,name:t.fC.AfterGroupBy,resolve:function(e,r,n,o){var i;return Boolean((null==r?void 0:r.is(t.iv.Keyword,x))&&(null===(i=null==r?void 0:r.getPreviousKeyword())||void 0===i?void 0:i.is(t.iv.Keyword,"group"))&&((null==n?void 0:n.isIdentifier())||(null==n?void 0:n.isDoubleQuotedString())||(null==n?void 0:n.is(t.iv.Parenthesis,")"))||(null==n?void 0:n.is(t.iv.Parenthesis,"()"))))}},{id:t.fC.SelectAlias,name:t.fC.SelectAlias,resolve:function(e,t,r,n){return","===(null==r?void 0:r.value)&&"as"===(null==t?void 0:t.value.toLowerCase())}},{id:t.fC.FromKeyword,name:t.fC.FromKeyword,resolve:function(e,t,r,n){return Boolean((null==t?void 0:t.value.toLowerCase())===L&&","!==(null==r?void 0:r.value)||((null==e?void 0:e.isKeyword())||(null==e?void 0:e.isIdentifier()))&&D.toLowerCase().startsWith(e.value.toLowerCase()))}},{id:t.fC.AfterFromKeyword,name:t.fC.AfterFromKeyword,resolve:function(e,t,r,n){return Boolean(!(null==e?void 0:e.value.includes("."))&&(null==r?void 0:r.value.toLowerCase())===D)}},{id:t.fC.AfterSchema,name:t.fC.AfterSchema,resolve:function(e,t,r,n){return(null==e?void 0:e.isWhiteSpace())&&(null==e?void 0:e.next)&&(r=null==(e=null==e?void 0:e.previous)?void 0:e.getPreviousNonWhiteSpaceToken()),Boolean((null==e?void 0:e.isIdentifier())&&(null==e?void 0:e.value.endsWith("."))&&(null==r?void 0:r.value.toLowerCase())===D)}},{id:t.fC.AfterFrom,name:t.fC.AfterFrom,resolve:function(e,t,r,n){return Boolean((null==t?void 0:t.value.toLowerCase())===D&&(null==r?void 0:r.isDoubleQuotedString())||(null==t?void 0:t.value.toLowerCase())===D&&(null==r?void 0:r.isIdentifier())||(null==t?void 0:t.value.toLowerCase())===D&&(null==r?void 0:r.isVariable()))}},{id:t.fC.AfterTable,name:t.fC.AfterTable,resolve:function(e,t,r,n){return Boolean((null==t?void 0:t.value.toLowerCase())===D&&((null==r?void 0:r.isVariable())||""!==(null==r?void 0:r.value)&&(null==r?void 0:r.value.toLowerCase())!==D))}},{id:t.fC.WhereKeyword,name:t.fC.WhereKeyword,resolve:function(e,r,n,o){return Boolean("where"===(null==r?void 0:r.value.toLowerCase())&&((null==n?void 0:n.isKeyword())||(null==n?void 0:n.is(t.iv.Parenthesis,"("))||(null==n?void 0:n.is(t.iv.Operator,"AND"))))}},{id:t.fC.WhereComparisonOperator,name:t.fC.WhereComparisonOperator,resolve:function(e,r,n,o){return Boolean("where"===(null==r?void 0:r.value.toLowerCase())&&!(null==n?void 0:n.getPreviousNonWhiteSpaceToken().isOperator())&&!e.is(t.iv.Delimiter,".")&&!e.isParenthesis()&&((null==n?void 0:n.isIdentifier())||(null==n?void 0:n.isDoubleQuotedString())))}},{id:t.fC.WhereValue,name:t.fC.WhereValue,resolve:function(e,t,r,n){return Boolean("where"===(null==t?void 0:t.value.toLowerCase())&&(null==r?void 0:r.isOperator()))}},{id:t.fC.AfterWhereValue,name:t.fC.AfterWhereValue,resolve:function(e,r,n,o){var i,s,l;return Boolean("where"===(null==r?void 0:r.value.toLowerCase())&&(n.is(t.iv.Operator,"and")||n.is(t.iv.Operator,"or")||(null==n?void 0:n.isString())||(null==n?void 0:n.isNumber())||(null==n?void 0:n.is(t.iv.Parenthesis,")"))||(null==n?void 0:n.is(t.iv.Parenthesis,"()"))||(null==n?void 0:n.isTemplateVariable())||(null==n?void 0:n.is(t.iv.IdentifierQuote))&&(null===(i=n.getPreviousNonWhiteSpaceToken())||void 0===i?void 0:i.is(t.iv.Identifier))&&(null===(l=null===(s=null==n?void 0:n.getPreviousNonWhiteSpaceToken())||void 0===s?void 0:s.getPreviousNonWhiteSpaceToken())||void 0===l?void 0:l.is(t.iv.IdentifierQuote))))}},{id:t.fC.AfterGroupByKeywords,name:t.fC.AfterGroupByKeywords,resolve:function(e,r,n,o){var i;return Boolean((null==r?void 0:r.is(t.iv.Keyword,x))&&(null===(i=null==r?void 0:r.getPreviousKeyword())||void 0===i?void 0:i.is(t.iv.Keyword,"group"))&&((null==n?void 0:n.is(t.iv.Keyword,x))||(null==n?void 0:n.is(t.iv.Delimiter,","))))}},{id:t.fC.AfterGroupByFunctionArgument,name:t.fC.AfterGroupByFunctionArgument,resolve:function(e,r,n,o){var i;return Boolean((null==r?void 0:r.is(t.iv.Keyword,x))&&(null===(i=null==r?void 0:r.getPreviousKeyword())||void 0===i?void 0:i.is(t.iv.Keyword,"group"))&&((null==n?void 0:n.is(t.iv.Parenthesis,"("))||(null==e?void 0:e.is(t.iv.Parenthesis,"()"))))}},{id:t.fC.AfterOrderByKeywords,name:t.fC.AfterOrderByKeywords,resolve:function(e,r,n,o){var i;return Boolean((null==n?void 0:n.is(t.iv.Keyword,x))&&(null===(i=null==n?void 0:n.getPreviousKeyword())||void 0===i?void 0:i.is(t.iv.Keyword,"order")))}},{id:t.fC.AfterOrderByFunction,name:t.fC.AfterOrderByFunction,resolve:function(e,r,n,o){var i,s;return Boolean((null==r?void 0:r.is(t.iv.Keyword,x))&&(null===(i=null==r?void 0:r.getPreviousKeyword())||void 0===i?void 0:i.is(t.iv.Keyword,"order"))&&(null==n?void 0:n.is(t.iv.Parenthesis))&&(null===(s=null==n?void 0:n.getPreviousNonWhiteSpaceToken())||void 0===s?void 0:s.is(t.iv.Function)))}},{id:t.fC.AfterOrderByDirection,name:t.fC.AfterOrderByDirection,resolve:function(e,r,n,o){return Boolean((null==r?void 0:r.is(t.iv.Keyword,M))||(null==r?void 0:r.is(t.iv.Keyword,k)))}},{id:t.fC.AfterIsOperator,name:t.fC.AfterIsOperator,resolve:function(e,r,n,o){return Boolean(null==n?void 0:n.is(t.iv.Operator,"IS"))}},{id:t.fC.AfterIsNotOperator,name:t.fC.AfterIsNotOperator,resolve:function(e,r,n,o){var i;return Boolean((null==n?void 0:n.is(t.iv.Operator,"NOT"))&&(null===(i=n.getPreviousNonWhiteSpaceToken())||void 0===i?void 0:i.is(t.iv.Operator,"IS")))}}]}var te={logger:function(){}},re=function(){};d.attachDebugger&&d.createLogger&&(te=d.createLogger("SQLEditor"),re=te.logger,d.attachDebugger("sqleditor",void 0,te));var ne=[{id:"$__timeFilter(dateColumn)",name:"$__timeFilter(dateColumn)",text:"$__timeFilter",args:["column"],type:t.mB.Filter,description:"Will be replaced by a time range filter using the specified column name. For example, dateColumn BETWEEN FROM_UNIXTIME(1494410783) AND FROM_UNIXTIME(1494410983)"},{id:"$__timeFrom()",name:"$__timeFrom()",text:"$__timeFrom",args:[],type:t.mB.Filter,description:"Will be replaced by the start of the currently active time selection. For example, FROM_UNIXTIME(1494410783)"},{id:"$__timeTo()",name:"$__timeTo()",text:"$__timeTo",args:[],type:t.mB.Filter,description:"Will be replaced by the end of the currently active time selection. For example, FROM_UNIXTIME(1494410983)"},{id:"$__timeGroup(dateColumn, '5m')",name:"$__timeGroup(dateColumn, '5m')",text:"$__timeGroup",args:["column","'5m'"],type:t.mB.Value,description:"Will be replaced by an expression usable in GROUP BY clause. For example, *cast(cast(UNIX_TIMESTAMP(dateColumn)/(300) as signed)*300 as signed),*"},{id:"$__table",name:"$__table",text:"$__table",args:[],type:t.mB.Table,description:"Will be replaced by the query table."},{id:"$__column",name:"$__column",text:"$__column",args:[],type:t.mB.Column,description:"Will be replaced by the query column."}];function oe(e,r){var n,o,i,s={triggerCharacters:["."," ","$",",","(","'"]};(null==r?void 0:r.builtinFunctions.length)&&(s.supportedFunctions=function(){return r.builtinFunctions.map((function(e){return{id:e,name:e}}))});var l=[];return(null===(n=null==r?void 0:r.comparisonOperators)||void 0===n?void 0:n.length)&&l.push.apply(l,S([],O(r.comparisonOperators.map((function(e){return{id:e.toLocaleLowerCase(),operator:e,type:t.$M.Comparison}}))),!1)),r.logicalOperators=null!==(o=r.logicalOperators)&&void 0!==o?o:r.operators,(null===(i=null==r?void 0:r.logicalOperators)||void 0===i?void 0:i.length)&&l.push.apply(l,S([],O(r.logicalOperators.map((function(e){return{id:e.toLocaleLowerCase(),operator:e,type:t.$M.Logical}}))),!1)),s.supportedOperators=function(){return l},s.supportedMacros=function(){return ne},s}var ie={id:"standardSql",extensions:[".sql"],aliases:["sql"],mimetypes:[],loader:function(){return Promise.resolve().then((function(){return G}))},completionProvider:oe},se=new Map,le=new Map,ae=function(e,r,n){return T(void 0,void 0,void 0,(function(){var o,i,s,l,a,u,f,c;return w(this,(function(p){switch(p.label){case 0:return[4,(o=function(e,t){if("sql"!==(null==t?void 0:t.id)&&!t.loader){re("Loading language '".concat(null==t?void 0:t.id,"' from Monaco registry"),!1);var r=e.languages.getLanguages().find((function(e){return e.id===(null==t?void 0:t.id)}));if(!r)throw Error("Unknown Monaco language ".concat(null==t?void 0:t.id));return v(v({completionProvider:oe},r),t)}return v(v({},ie),t)}(e,r)).loader(e)];case 1:return i=p.sent(),s=i.language,l=i.conf,e.languages.register({id:n}),e.languages.setMonarchTokensProvider(n,v({},s)),e.languages.setLanguageConfiguration(n,v({},l)),o.formatter&&e.languages.registerDocumentFormattingEditProvider(n,{provideDocumentFormattingEdits:function(e){var t=r.formatter(e.getValue());return[{range:e.getFullModelRange(),text:t}]}}),o.completionProvider&&(a=o.completionProvider(e,s),function(e,r,n){var o,i,s,l,a,u,f,c,p,d,y,g=this;se.has(e)||function(e){se.has(e)||se.set(e,{functions:new m.Registry,operators:new m.Registry,suggestionKinds:new m.Registry(C),positionResolvers:new m.Registry(ee),macros:new m.Registry}),se.get(e)}(e);var E,q,R,A=se.get(e);le.has(r)||le.set(r,new m.Registry((E=A.functions,q=A.operators,R=A.macros,function(){return[{id:t.is.SelectKeyword,name:t.is.SelectKeyword,suggestions:function(e,r){return Promise.resolve([{label:"SELECT <column>",insertText:"SELECT $0",insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Snippet,command:W,sortText:t.G8.Medium},{label:"SELECT <column> FROM <table>",insertText:"SELECT $2 FROM $1",insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Snippet,command:W,sortText:t.G8.Medium}])}},{id:t.is.TemplateVariables,name:t.is.TemplateVariables,suggestions:function(e,r){var n=h.getTemplateSrv();return n?Promise.resolve(n.getVariables().map((function(e){var r="$".concat(e.name),o=n.replace(r);return{label:r,detail:"(Template Variable) ".concat(o),kind:t.cm.Snippet,documentation:"(Template Variable) ".concat(o),insertText:"\\$".concat(e.name," "),insertTextRules:t.a7.InsertAsSnippet,command:W,sortText:t.G8.Low}}))):Promise.resolve([])}},{id:t.is.SelectMacro,name:t.is.SelectMacro,suggestions:function(e,r){return Promise.resolve(S([],O(R.list().filter((function(e){return e.type===t.mB.Value||e.type===t.mB.Column})).map(J)),!1))}},{id:t.is.TableMacro,name:t.is.TableMacro,suggestions:function(e,r){return Promise.resolve(S([],O(R.list().filter((function(e){return e.type===t.mB.Table})).map(J)),!1))}},{id:t.is.GroupMacro,name:t.is.GroupMacro,suggestions:function(e,r){return Promise.resolve(S([],O(R.list().filter((function(e){return e.type===t.mB.Group})).map(J)),!1))}},{id:t.is.FilterMacro,name:t.is.FilterMacro,suggestions:function(e,r){return Promise.resolve(S([],O(R.list().filter((function(e){return e.type===t.mB.Filter})).map(J)),!1))}},{id:t.is.WithKeyword,name:t.is.WithKeyword,suggestions:function(e,r){return Promise.resolve([{label:"WITH <alias> AS ( ... )",insertText:"WITH $1  AS ( $2 )",insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Snippet,command:W,sortText:t.G8.Medium}])}},{id:t.is.StarWildCard,name:t.is.StarWildCard,suggestions:function(e,r){return Promise.resolve([{label:"*",insertText:"* $0",insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Field,command:W,sortText:t.G8.High}])}},{id:t.is.FunctionsWithArguments,name:t.is.FunctionsWithArguments,suggestions:function(e,r){return Promise.resolve(S([],O(E.list().map((function(e){return{label:e.name,insertText:"".concat(e.name,"($0)"),documentation:e.description,insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Function,command:W,sortText:t.G8.MediumLow}}))),!1))}},{id:t.is.FunctionsWithoutArguments,name:t.is.FunctionsWithoutArguments,suggestions:function(e,r){return Promise.resolve(S([],O(E.list().map((function(e){return{label:e.name,insertText:"".concat(e.name,"()"),documentation:e.description,insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Function,command:W,sortText:t.G8.MediumHigh}}))),!1))}},{id:t.is.FromKeyword,name:t.is.FromKeyword,suggestions:function(e,r){return Promise.resolve([{label:"FROM",insertText:"FROM $0",command:W,insertTextRules:t.a7.InsertAsSnippet,kind:t.cm.Keyword}])}},{id:t.is.Schemas,name:t.is.Schemas,suggestions:function(e,t){return Promise.resolve([])}},{id:t.is.Tables,name:t.is.Tables,suggestions:function(e,t){return Promise.resolve([])}},{id:t.is.Columns,name:t.is.Columns,suggestions:function(e,t){return Promise.resolve([])}},{id:t.is.LogicalOperators,name:t.is.LogicalOperators,suggestions:function(e,r){return Promise.resolve(q.list().filter((function(e){return e.type===t.$M.Logical})).map((function(e){return{label:e.operator,insertText:"".concat(e.operator," "),documentation:e.description,command:W,sortText:t.G8.MediumHigh,kind:t.cm.Operator}})))}},{id:t.is.WhereKeyword,name:t.is.WhereKeyword,suggestions:function(e,r){return Promise.resolve([{label:"WHERE",insertText:"WHERE ",command:W,sortText:t.G8.MediumHigh,kind:t.cm.Keyword}])}},{id:t.is.ComparisonOperators,name:t.is.ComparisonOperators,suggestions:function(e,r){return Promise.resolve(S(S([],O(q.list().filter((function(e){return e.type===t.$M.Comparison})).map((function(e){return{label:e.operator,insertText:"".concat(e.operator," "),documentation:e.description,command:W,sortText:t.G8.MediumHigh,kind:t.cm.Operator}}))),!1),[{label:"IN (...)",insertText:"IN ( $0 )",command:W,sortText:t.G8.Medium,kind:t.cm.Operator,insertTextRules:t.a7.InsertAsSnippet},{label:"NOT IN (...)",insertText:"NOT IN ( $0 )",command:W,sortText:t.G8.Medium,kind:t.cm.Operator,insertTextRules:t.a7.InsertAsSnippet},{label:"IS",insertText:"IS",command:W,sortText:t.G8.Medium,kind:t.cm.Operator},{label:"IS NOT",insertText:"IS NOT",command:W,sortText:t.G8.Medium,kind:t.cm.Operator}],!1))}},{id:t.is.GroupByKeywords,name:t.is.GroupByKeywords,suggestions:function(e,r){return Promise.resolve([{label:"GROUP BY",insertText:"GROUP BY ",command:W,sortText:t.G8.MediumHigh,kind:t.cm.Keyword}])}},{id:t.is.OrderByKeywords,name:t.is.OrderByKeywords,suggestions:function(e,r){return Promise.resolve([{label:"ORDER BY",insertText:"ORDER BY ",command:W,sortText:t.G8.Medium,kind:t.cm.Keyword},{label:"ORDER BY(ascending)",insertText:"ORDER BY $1 ASC ",command:W,sortText:t.G8.MediumLow,kind:t.cm.Snippet,insertTextRules:t.a7.InsertAsSnippet},{label:"ORDER BY(descending)",insertText:"ORDER BY $1 DESC",command:W,sortText:t.G8.MediumLow,kind:t.cm.Snippet,insertTextRules:t.a7.InsertAsSnippet}])}},{id:t.is.LimitKeyword,name:t.is.LimitKeyword,suggestions:function(e,r){return Promise.resolve([{label:"LIMIT",insertText:"LIMIT ",command:W,sortText:t.G8.MediumLow,kind:t.cm.Keyword}])}},{id:t.is.SortOrderDirectionKeyword,name:t.is.SortOrderDirectionKeyword,suggestions:function(e,r){return Promise.resolve([k,M].map((function(e){return{label:e,insertText:"".concat(e," "),command:W,kind:t.cm.Keyword}})))}},{id:t.is.NotKeyword,name:t.is.NotKeyword,suggestions:function(){return Promise.resolve([{label:"NOT",insertText:"NOT",command:W,kind:t.cm.Keyword,sortText:t.G8.High}])}},{id:t.is.BoolValues,name:t.is.BoolValues,suggestions:function(){return Promise.resolve(["TRUE","FALSE"].map((function(e){return{label:e,insertText:"".concat(e),command:W,kind:t.cm.Keyword,sortText:t.G8.Medium}})))}},{id:t.is.NullValue,name:t.is.NullValue,suggestions:function(){return Promise.resolve(["NULL"].map((function(e){return{label:e,insertText:"".concat(e),command:W,kind:t.cm.Keyword,sortText:t.G8.Low}})))}}]})));var I=le.get(r);if(n.supportedFunctions)try{for(var N=b(n.supportedFunctions()),P=N.next();!P.done;P=N.next()){var _=P.value;A.functions.getIfExists(_.id)||A.functions.register(_)}}catch(e){o={error:e}}finally{try{P&&!P.done&&(i=N.return)&&i.call(N)}finally{if(o)throw o.error}}if(n.supportedOperators)try{for(var L=b(n.supportedOperators()),D=L.next();!D.done;D=L.next()){var x=D.value;A.operators.getIfExists(x.id)||A.operators.register(v(v({},x),{name:x.id}))}}catch(e){s={error:e}}finally{try{D&&!D.done&&(l=L.return)&&l.call(L)}finally{if(s)throw s.error}}if(n.supportedMacros)try{for(var F=b(n.supportedMacros()),B=F.next();!B.done;B=F.next()){var U=B.value;A.macros.getIfExists(U.id)||A.macros.register(v(v({},U),{name:U.id}))}}catch(e){a={error:e}}finally{try{B&&!B.done&&(u=F.return)&&u.call(F)}finally{if(a)throw a.error}}if(n.customStatementPlacement){var K=function(e){var t=A.positionResolvers.getIfExists(e.id);if(t){var r=t.resolve;t.resolve=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=e.resolve.apply(e,S([],O(t),!1));return e.overrideDefault?o:r.apply(void 0,S([],O(t),!1))||o}}else A.positionResolvers.register(v(v({},e),{id:e.id,name:e.id})),A.suggestionKinds.register({id:e.id,name:e.id,kind:[]})};try{for(var G=b(n.customStatementPlacement()),V=G.next();!V.done;V=G.next()){K(V.value)}}catch(e){f={error:e}}finally{try{V&&!V.done&&(c=G.return)&&c.call(G)}finally{if(f)throw f.error}}}if(n.customSuggestionKinds){var H=function(e){if(null===(y=e.applyTo)||void 0===y||y.forEach((function(t){var r=A.suggestionKinds.getIfExists(t);r&&-1===r.kind.indexOf(e.id)&&r.kind.push(e.id)})),e.overrideDefault){var t=I.get(e.id);if(void 0!==t)return t.suggestions=e.suggestionsResolver,"continue"}I.register({id:e.id,name:e.id,suggestions:e.suggestionsResolver})};try{for(var Q=b(n.customSuggestionKinds()),X=Q.next();!X.done;X=Q.next()){H(X.value)}}catch(e){p={error:e}}finally{try{X&&!X.done&&(d=Q.return)&&d.call(Q)}finally{if(p)throw p.error}}}if(n.schemas){var $=(Z=I.get(t.is.Schemas)).suggestions;Z.suggestions=function(e,r){return T(g,void 0,void 0,(function(){var o,i,s;return w(this,(function(l){switch(l.label){case 0:return[4,$(e,r)];case 1:return o=l.sent(),[4,n.schemas.resolve()];case 2:return i=l.sent(),s=i.map((function(e){var r;return{label:e.name,insertText:"".concat(null!==(r=e.completion)&&void 0!==r?r:e.name,"."),command:W,kind:t.cm.Module,sortText:t.G8.High}})),[2,S(S([],O(o),!1),O(s),!1)]}}))}))}}if(n.tables){var z=(Z=I.get(t.is.Tables)).suggestions;Z.suggestions=function(e,r){return T(g,void 0,void 0,(function(){var o,i,s,l,a,u,f;return w(this,(function(c){switch(c.label){case 0:return[4,z(e,r)];case 1:return o=c.sent(),i=j(e.currentToken),s=null!==(f=null===(u=n.tables)||void 0===u?void 0:u.parseName)&&void 0!==f?f:Y,l=s(i),[4,n.tables.resolve(l)];case 2:return a=c.sent().map((function(e){var r;return{label:e.name,insertText:"".concat(null!==(r=e.completion)&&void 0!==r?r:e.name).concat(e.completion===e.name?" $0":""),insertTextRules:t.a7.InsertAsSnippet,command:W,kind:t.cm.Field,sortText:t.G8.MediumHigh}})),[2,S(S([],O(o),!1),O(a),!1)]}}))}))}}if(n.columns){var Z,te=(Z=I.get(t.is.Columns)).suggestions;Z.suggestions=function(e,r){return T(g,void 0,void 0,(function(){var o,i,s,l,a,u,f,c,p;return w(this,(function(d){switch(d.label){case 0:return[4,te(e,r)];case 1:return o=d.sent(),i=j(e.currentToken),l=null!==(c=null===(f=n.tables)||void 0===f?void 0:f.parseName)&&void 0!==c?c:Y,i&&i.value&&(s=l(i)),a=[],s?[4,null===(p=n.columns)||void 0===p?void 0:p.resolve(s)]:[3,3];case 2:u=d.sent(),a=u?u.map((function(e){var r;return{label:e.name,insertText:null!==(r=e.completion)&&void 0!==r?r:e.name,kind:t.cm.Field,sortText:t.G8.High,detail:e.type,documentation:e.description}})):[],d.label=3;case 3:return[2,S(S([],O(o),!1),O(a),!1)]}}))}))}}}(r.id,n,a),u=se.get(r.id),f=le.get(n),c=function(t,r,o,i){return T(void 0,void 0,void 0,(function(){var o,i,s,l;return w(this,(function(a){switch(a.label){case 0:return o=P(e,t,r,n),i=R(o,u.positionResolvers),s=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=t.getIfExists(e[n]);o&&(r=r.concat(o.kind))}return r}(i,u.suggestionKinds),re("Statement position",!1,i),re("Suggestion kinds",!1,s),l={position:r,currentToken:o,statementPosition:i,kind:s,range:e.Range.fromPositions(r)},[4,A(e,o,s,l,f)];case 1:return[2,{suggestions:a.sent()}]}}))}))},e.languages.registerCompletionItemProvider(n,v(v({},a),{provideCompletionItems:c}))),[2]}}))}))},ue={testData:Object.freeze({__proto__:null,singleLineFullQuery:{query:'SELECT column1, FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1 DESC LIMIT 10',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"identifier.sql",language:"sql"},{offset:14,type:"delimiter.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"keyword.sql",language:"sql"},{offset:20,type:"white.sql",language:"sql"},{offset:21,type:"identifier.sql",language:"sql"},{offset:27,type:"white.sql",language:"sql"},{offset:28,type:"keyword.sql",language:"sql"},{offset:33,type:"white.sql",language:"sql"},{offset:34,type:"identifier.sql",language:"sql"},{offset:41,type:"white.sql",language:"sql"},{offset:42,type:"operator.sql",language:"sql"},{offset:43,type:"white.sql",language:"sql"},{offset:44,type:"identifier.quote.sql",language:"sql"},{offset:45,type:"identifier.sql",language:"sql"},{offset:51,type:"identifier.quote.sql",language:"sql"},{offset:52,type:"white.sql",language:"sql"},{offset:53,type:"keyword.sql",language:"sql"},{offset:58,type:"white.sql",language:"sql"},{offset:59,type:"keyword.sql",language:"sql"},{offset:61,type:"white.sql",language:"sql"},{offset:62,type:"identifier.sql",language:"sql"},{offset:69,type:"white.sql",language:"sql"},{offset:70,type:"keyword.sql",language:"sql"},{offset:75,type:"white.sql",language:"sql"},{offset:76,type:"keyword.sql",language:"sql"},{offset:78,type:"white.sql",language:"sql"},{offset:79,type:"identifier.sql",language:"sql"},{offset:86,type:"white.sql",language:"sql"},{offset:87,type:"keyword.sql",language:"sql"},{offset:91,type:"white.sql",language:"sql"},{offset:92,type:"keyword.sql",language:"sql"},{offset:97,type:"white.sql",language:"sql"},{offset:98,type:"number.sql",language:"sql"},{offset:100,type:"delimiter.sql",language:"sql"}]]},singleLineFullQueryWithAggregation:{query:'SELECT count(column1), FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1 DESC LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:27,type:"white.sql",language:"sql"},{offset:28,type:"identifier.sql",language:"sql"},{offset:34,type:"white.sql",language:"sql"},{offset:35,type:"keyword.sql",language:"sql"},{offset:40,type:"white.sql",language:"sql"},{offset:41,type:"identifier.sql",language:"sql"},{offset:48,type:"white.sql",language:"sql"},{offset:49,type:"operator.sql",language:"sql"},{offset:50,type:"white.sql",language:"sql"},{offset:51,type:"identifier.quote.sql",language:"sql"},{offset:52,type:"identifier.sql",language:"sql"},{offset:58,type:"identifier.quote.sql",language:"sql"},{offset:59,type:"white.sql",language:"sql"},{offset:60,type:"keyword.sql",language:"sql"},{offset:65,type:"white.sql",language:"sql"},{offset:66,type:"keyword.sql",language:"sql"},{offset:68,type:"white.sql",language:"sql"},{offset:69,type:"identifier.sql",language:"sql"},{offset:76,type:"white.sql",language:"sql"},{offset:77,type:"keyword.sql",language:"sql"},{offset:82,type:"white.sql",language:"sql"},{offset:83,type:"keyword.sql",language:"sql"},{offset:85,type:"white.sql",language:"sql"},{offset:86,type:"identifier.sql",language:"sql"},{offset:93,type:"white.sql",language:"sql"},{offset:94,type:"keyword.sql",language:"sql"},{offset:98,type:"white.sql",language:"sql"},{offset:99,type:"keyword.sql",language:"sql"},{offset:104,type:"white.sql",language:"sql"},{offset:105,type:"number.sql",language:"sql"},{offset:107,type:"delimiter.sql",language:"sql"}]]},multiLineFullQuery:{query:'SELECT column1,  \n  FROM table1 \n  \n  WHERE column1 = "value1" \n  GROUP BY column1 ORDER BY column1 DESC \n  LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"identifier.sql",language:"sql"},{offset:14,type:"delimiter.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:4,type:"white.sql",language:"sql"},{offset:5,type:"identifier.sql",language:"sql"},{offset:11,type:"white.sql",language:"sql"}],[{offset:0,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"identifier.sql",language:"sql"},{offset:13,type:"white.sql",language:"sql"},{offset:14,type:"operator.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"identifier.quote.sql",language:"sql"},{offset:17,type:"identifier.sql",language:"sql"},{offset:23,type:"identifier.quote.sql",language:"sql"},{offset:24,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"keyword.sql",language:"sql"},{offset:8,type:"white.sql",language:"sql"},{offset:9,type:"identifier.sql",language:"sql"},{offset:16,type:"white.sql",language:"sql"},{offset:17,type:"keyword.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:25,type:"white.sql",language:"sql"},{offset:26,type:"identifier.sql",language:"sql"},{offset:33,type:"white.sql",language:"sql"},{offset:34,type:"keyword.sql",language:"sql"},{offset:38,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"number.sql",language:"sql"},{offset:8,type:"delimiter.sql",language:"sql"}]]},multiLineFullQueryWithAggregation:{query:'SELECT count(column1),  \n  FROM table1 \n  \n  WHERE column1 = "value1" \n  GROUP BY column1 ORDER BY column1 DESC \n  LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:4,type:"white.sql",language:"sql"},{offset:5,type:"identifier.sql",language:"sql"},{offset:11,type:"white.sql",language:"sql"}],[{offset:0,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"identifier.sql",language:"sql"},{offset:13,type:"white.sql",language:"sql"},{offset:14,type:"operator.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"identifier.quote.sql",language:"sql"},{offset:17,type:"identifier.sql",language:"sql"},{offset:23,type:"identifier.quote.sql",language:"sql"},{offset:24,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"keyword.sql",language:"sql"},{offset:8,type:"white.sql",language:"sql"},{offset:9,type:"identifier.sql",language:"sql"},{offset:16,type:"white.sql",language:"sql"},{offset:17,type:"keyword.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:25,type:"white.sql",language:"sql"},{offset:26,type:"identifier.sql",language:"sql"},{offset:33,type:"white.sql",language:"sql"},{offset:34,type:"keyword.sql",language:"sql"},{offset:38,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"number.sql",language:"sql"},{offset:8,type:"delimiter.sql",language:"sql"}]]},singleLineEmptyQuery:{query:"",tokens:[]},singleLineTwoQueries:{query:'SELECT column1, FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1 DESC LIMIT 10; SELECT column2, FROM table2 WHERE column2 = "value2" GROUP BY column1 ORDER BY column2 DESC LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"identifier.sql",language:"sql"},{offset:14,type:"delimiter.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"keyword.sql",language:"sql"},{offset:20,type:"white.sql",language:"sql"},{offset:21,type:"identifier.sql",language:"sql"},{offset:27,type:"white.sql",language:"sql"},{offset:28,type:"keyword.sql",language:"sql"},{offset:33,type:"white.sql",language:"sql"},{offset:34,type:"identifier.sql",language:"sql"},{offset:41,type:"white.sql",language:"sql"},{offset:42,type:"operator.sql",language:"sql"},{offset:43,type:"white.sql",language:"sql"},{offset:44,type:"identifier.quote.sql",language:"sql"},{offset:45,type:"identifier.sql",language:"sql"},{offset:51,type:"identifier.quote.sql",language:"sql"},{offset:52,type:"white.sql",language:"sql"},{offset:53,type:"keyword.sql",language:"sql"},{offset:58,type:"white.sql",language:"sql"},{offset:59,type:"keyword.sql",language:"sql"},{offset:61,type:"white.sql",language:"sql"},{offset:62,type:"identifier.sql",language:"sql"},{offset:69,type:"white.sql",language:"sql"},{offset:70,type:"keyword.sql",language:"sql"},{offset:75,type:"white.sql",language:"sql"},{offset:76,type:"keyword.sql",language:"sql"},{offset:78,type:"white.sql",language:"sql"},{offset:79,type:"identifier.sql",language:"sql"},{offset:86,type:"white.sql",language:"sql"},{offset:87,type:"keyword.sql",language:"sql"},{offset:91,type:"white.sql",language:"sql"},{offset:92,type:"keyword.sql",language:"sql"},{offset:97,type:"white.sql",language:"sql"},{offset:98,type:"number.sql",language:"sql"},{offset:100,type:"delimiter.sql",language:"sql"},{offset:101,type:"white.sql",language:"sql"},{offset:102,type:"keyword.sql",language:"sql"},{offset:108,type:"white.sql",language:"sql"},{offset:109,type:"identifier.sql",language:"sql"},{offset:116,type:"delimiter.sql",language:"sql"},{offset:117,type:"white.sql",language:"sql"},{offset:118,type:"keyword.sql",language:"sql"},{offset:122,type:"white.sql",language:"sql"},{offset:123,type:"identifier.sql",language:"sql"},{offset:129,type:"white.sql",language:"sql"},{offset:130,type:"keyword.sql",language:"sql"},{offset:135,type:"white.sql",language:"sql"},{offset:136,type:"identifier.sql",language:"sql"},{offset:143,type:"white.sql",language:"sql"},{offset:144,type:"operator.sql",language:"sql"},{offset:145,type:"white.sql",language:"sql"},{offset:146,type:"identifier.quote.sql",language:"sql"},{offset:147,type:"identifier.sql",language:"sql"},{offset:153,type:"identifier.quote.sql",language:"sql"},{offset:154,type:"white.sql",language:"sql"},{offset:155,type:"keyword.sql",language:"sql"},{offset:160,type:"white.sql",language:"sql"},{offset:161,type:"keyword.sql",language:"sql"},{offset:163,type:"white.sql",language:"sql"},{offset:164,type:"identifier.sql",language:"sql"},{offset:171,type:"white.sql",language:"sql"},{offset:172,type:"keyword.sql",language:"sql"},{offset:177,type:"white.sql",language:"sql"},{offset:178,type:"keyword.sql",language:"sql"},{offset:180,type:"white.sql",language:"sql"},{offset:181,type:"identifier.sql",language:"sql"},{offset:188,type:"white.sql",language:"sql"},{offset:189,type:"keyword.sql",language:"sql"},{offset:193,type:"white.sql",language:"sql"},{offset:194,type:"keyword.sql",language:"sql"},{offset:199,type:"white.sql",language:"sql"},{offset:200,type:"number.sql",language:"sql"},{offset:202,type:"delimiter.sql",language:"sql"}]]},singleLineTwoQueriesWithAggregation:{query:'SELECT count(column1), FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1 DESC LIMIT 10; SELECT count(column2), FROM table2 WHERE column2 = "value2" GROUP BY column1 ORDER BY column2 DESC LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:27,type:"white.sql",language:"sql"},{offset:28,type:"identifier.sql",language:"sql"},{offset:34,type:"white.sql",language:"sql"},{offset:35,type:"keyword.sql",language:"sql"},{offset:40,type:"white.sql",language:"sql"},{offset:41,type:"identifier.sql",language:"sql"},{offset:48,type:"white.sql",language:"sql"},{offset:49,type:"operator.sql",language:"sql"},{offset:50,type:"white.sql",language:"sql"},{offset:51,type:"identifier.quote.sql",language:"sql"},{offset:52,type:"identifier.sql",language:"sql"},{offset:58,type:"identifier.quote.sql",language:"sql"},{offset:59,type:"white.sql",language:"sql"},{offset:60,type:"keyword.sql",language:"sql"},{offset:65,type:"white.sql",language:"sql"},{offset:66,type:"keyword.sql",language:"sql"},{offset:68,type:"white.sql",language:"sql"},{offset:69,type:"identifier.sql",language:"sql"},{offset:76,type:"white.sql",language:"sql"},{offset:77,type:"keyword.sql",language:"sql"},{offset:82,type:"white.sql",language:"sql"},{offset:83,type:"keyword.sql",language:"sql"},{offset:85,type:"white.sql",language:"sql"},{offset:86,type:"identifier.sql",language:"sql"},{offset:93,type:"white.sql",language:"sql"},{offset:94,type:"keyword.sql",language:"sql"},{offset:98,type:"white.sql",language:"sql"},{offset:99,type:"keyword.sql",language:"sql"},{offset:104,type:"white.sql",language:"sql"},{offset:105,type:"number.sql",language:"sql"},{offset:107,type:"delimiter.sql",language:"sql"},{offset:108,type:"white.sql",language:"sql"},{offset:109,type:"keyword.sql",language:"sql"},{offset:115,type:"white.sql",language:"sql"},{offset:116,type:"predefined.sql",language:"sql"},{offset:121,type:"delimiter.parenthesis.sql",language:"sql"},{offset:122,type:"identifier.sql",language:"sql"},{offset:129,type:"delimiter.parenthesis.sql",language:"sql"},{offset:130,type:"delimiter.sql",language:"sql"},{offset:131,type:"white.sql",language:"sql"},{offset:132,type:"keyword.sql",language:"sql"},{offset:136,type:"white.sql",language:"sql"},{offset:137,type:"identifier.sql",language:"sql"},{offset:143,type:"white.sql",language:"sql"},{offset:144,type:"keyword.sql",language:"sql"},{offset:149,type:"white.sql",language:"sql"},{offset:150,type:"identifier.sql",language:"sql"},{offset:157,type:"white.sql",language:"sql"},{offset:158,type:"operator.sql",language:"sql"},{offset:159,type:"white.sql",language:"sql"},{offset:160,type:"identifier.quote.sql",language:"sql"},{offset:161,type:"identifier.sql",language:"sql"},{offset:167,type:"identifier.quote.sql",language:"sql"},{offset:168,type:"white.sql",language:"sql"},{offset:169,type:"keyword.sql",language:"sql"},{offset:174,type:"white.sql",language:"sql"},{offset:175,type:"keyword.sql",language:"sql"},{offset:177,type:"white.sql",language:"sql"},{offset:178,type:"identifier.sql",language:"sql"},{offset:185,type:"white.sql",language:"sql"},{offset:186,type:"keyword.sql",language:"sql"},{offset:191,type:"white.sql",language:"sql"},{offset:192,type:"keyword.sql",language:"sql"},{offset:194,type:"white.sql",language:"sql"},{offset:195,type:"identifier.sql",language:"sql"},{offset:202,type:"white.sql",language:"sql"},{offset:203,type:"keyword.sql",language:"sql"},{offset:207,type:"white.sql",language:"sql"},{offset:208,type:"keyword.sql",language:"sql"},{offset:213,type:"white.sql",language:"sql"},{offset:214,type:"number.sql",language:"sql"},{offset:216,type:"delimiter.sql",language:"sql"}]]},singleLineMultipleColumns:{query:'SELECT count(column1), column2 FROM table1 WHERE column1 = "value1" GROUP BY column1 ORDER BY column1, avg(column2) DESC LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"identifier.sql",language:"sql"},{offset:30,type:"white.sql",language:"sql"},{offset:31,type:"keyword.sql",language:"sql"},{offset:35,type:"white.sql",language:"sql"},{offset:36,type:"identifier.sql",language:"sql"},{offset:42,type:"white.sql",language:"sql"},{offset:43,type:"keyword.sql",language:"sql"},{offset:48,type:"white.sql",language:"sql"},{offset:49,type:"identifier.sql",language:"sql"},{offset:56,type:"white.sql",language:"sql"},{offset:57,type:"operator.sql",language:"sql"},{offset:58,type:"white.sql",language:"sql"},{offset:59,type:"identifier.quote.sql",language:"sql"},{offset:60,type:"identifier.sql",language:"sql"},{offset:66,type:"identifier.quote.sql",language:"sql"},{offset:67,type:"white.sql",language:"sql"},{offset:68,type:"keyword.sql",language:"sql"},{offset:73,type:"white.sql",language:"sql"},{offset:74,type:"keyword.sql",language:"sql"},{offset:76,type:"white.sql",language:"sql"},{offset:77,type:"identifier.sql",language:"sql"},{offset:84,type:"white.sql",language:"sql"},{offset:85,type:"keyword.sql",language:"sql"},{offset:90,type:"white.sql",language:"sql"},{offset:91,type:"keyword.sql",language:"sql"},{offset:93,type:"white.sql",language:"sql"},{offset:94,type:"identifier.sql",language:"sql"},{offset:101,type:"delimiter.sql",language:"sql"},{offset:102,type:"white.sql",language:"sql"},{offset:103,type:"predefined.sql",language:"sql"},{offset:106,type:"delimiter.parenthesis.sql",language:"sql"},{offset:107,type:"identifier.sql",language:"sql"},{offset:114,type:"delimiter.parenthesis.sql",language:"sql"},{offset:115,type:"white.sql",language:"sql"},{offset:116,type:"keyword.sql",language:"sql"},{offset:120,type:"white.sql",language:"sql"},{offset:121,type:"keyword.sql",language:"sql"},{offset:126,type:"white.sql",language:"sql"},{offset:127,type:"number.sql",language:"sql"},{offset:129,type:"delimiter.sql",language:"sql"}]]},multiLineMultipleColumns:{query:'SELECT count(column1), column2 \n  FROM table1 \n  \n  WHERE column1 = "value1" \n  GROUP BY column1 ORDER BY column1, avg(column2) DESC \n  LIMIT 10;',tokens:[[{offset:0,type:"keyword.sql",language:"sql"},{offset:6,type:"white.sql",language:"sql"},{offset:7,type:"predefined.sql",language:"sql"},{offset:12,type:"delimiter.parenthesis.sql",language:"sql"},{offset:13,type:"identifier.sql",language:"sql"},{offset:20,type:"delimiter.parenthesis.sql",language:"sql"},{offset:21,type:"delimiter.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"identifier.sql",language:"sql"},{offset:30,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:4,type:"white.sql",language:"sql"},{offset:5,type:"identifier.sql",language:"sql"},{offset:11,type:"white.sql",language:"sql"}],[{offset:0,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"identifier.sql",language:"sql"},{offset:13,type:"white.sql",language:"sql"},{offset:14,type:"operator.sql",language:"sql"},{offset:15,type:"white.sql",language:"sql"},{offset:16,type:"identifier.quote.sql",language:"sql"},{offset:17,type:"identifier.sql",language:"sql"},{offset:23,type:"identifier.quote.sql",language:"sql"},{offset:24,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"keyword.sql",language:"sql"},{offset:8,type:"white.sql",language:"sql"},{offset:9,type:"identifier.sql",language:"sql"},{offset:16,type:"white.sql",language:"sql"},{offset:17,type:"keyword.sql",language:"sql"},{offset:22,type:"white.sql",language:"sql"},{offset:23,type:"keyword.sql",language:"sql"},{offset:25,type:"white.sql",language:"sql"},{offset:26,type:"identifier.sql",language:"sql"},{offset:33,type:"delimiter.sql",language:"sql"},{offset:34,type:"white.sql",language:"sql"},{offset:35,type:"predefined.sql",language:"sql"},{offset:38,type:"delimiter.parenthesis.sql",language:"sql"},{offset:39,type:"identifier.sql",language:"sql"},{offset:46,type:"delimiter.parenthesis.sql",language:"sql"},{offset:47,type:"white.sql",language:"sql"},{offset:48,type:"keyword.sql",language:"sql"},{offset:52,type:"white.sql",language:"sql"}],[{offset:0,type:"keyword.sql",language:"sql"},{offset:5,type:"white.sql",language:"sql"},{offset:6,type:"number.sql",language:"sql"},{offset:8,type:"delimiter.sql",language:"sql"}]]}}),testStatementPosition:function(e,t,r){describe("".concat(e),(function(){var n,o;beforeEach((function(){var e=new Map;t.forEach((function(t){return e.set(t.query.query,t.query.tokens)})),n=function(e){return{editor:{tokenize:function(t,r){return e.get(t)}},Range:{containsPosition:function(e,t){return t.lineNumber>=e.startLineNumber&&t.lineNumber<=e.endLineNumber&&t.column>=e.startColumn&&t.column<=e.endColumn}},languages:{CompletionItemKind:{Snippet:2,Function:1,Keyword:3},CompletionItemInsertTextRule:{InsertAsSnippet:2}}}}(e),o=new m.Registry((function(){return r().map((function(e){return{id:e.id,name:e.name||e.id,resolve:e.resolve}}))}))})),t.forEach((function(t){test("".concat(t.query.query),(function(){!function(e,t,r,n,o){var i,s=R(P(n,(i=e,{getValue:function(e,t){return i},getValueInRange:function(e,t){return i.split("\n")[e.startLineNumber-1].trim().slice(0===e.startColumn?0:e.startColumn-1,e.endColumn-1)},getLineLength:function(e){return i.split("\n")[e-1].trim().length}}),t),o);expect(s).toContain(r)}(t.query.query,{lineNumber:t.position.line,column:t.position.column},e,n,o)}))}))}))}},fe=function(e){return{button:E.css({paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)})}},ce=function(e){var t=e.children,r=q(e,["children"]),n=d.useStyles2(y.useCallback((function(e){return pe(e,r)}),[r]));return g.createElement("div",{className:n.root},t)},pe=function(e,t){var r,n,o;return{root:E.css({display:"flex",flexDirection:null!==(r=t.direction)&&void 0!==r?r:"row",flexWrap:null===(n=t.wrap)||void 0===n||n?"wrap":void 0,alignItems:t.alignItems,gap:e.spacing(null!==(o=t.gap)&&void 0!==o?o:2),flexGrow:t.flexGrow})}},de=function(e){return{root:E.css({display:"flex",flexWrap:"wrap",alignItems:"center",gap:e.spacing(3),minHeight:e.spacing(4)})}},ye=function(e){var t=d.useStyles2(y.useCallback((function(t){return ge(t,e)}),[e]));return g.createElement("span",{className:E.cx(t.wrapper)})};ye.defaultProps={v:0,h:0,layout:"block"};var ge=function(e,t){var r,n;return{wrapper:E.css([{paddingRight:e.spacing(null!==(r=t.h)&&void 0!==r?r:0),paddingBottom:e.spacing(null!==(n=t.v)&&void 0!==n?n:0)},"inline"===t.layout&&{display:"inline-block"},"block"===t.layout&&{display:"block"}])}},me=function(e){return{root:E.css({padding:e.spacing(1),backgroundColor:e.colors.background.secondary,borderRadius:e.shape.borderRadius(1)})}},he=g.forwardRef((function(e,t){var r=e.items,n=e.renderItem,o=e.onChange;return g.createElement(ce,null,r.map((function(e,t){return g.createElement("div",{key:t},n(e,(function(e){return function(e,t){var n=S([],O(r),!1);n[e]=t,o(n)}(t,e)}),(function(){return e=t,(n=S([],O(r),!1)).splice(e,1),void o(n);var e,n})))})),g.createElement(d.Button,{ref:t,onClick:function(){var e=S(S([],O(r),!1),[{}],!1);o(e)},variant:"secondary",size:"md",icon:"plus","aria-label":"Add",type:"button"}))})),Ee=function(e){var t=e.children,r=d.useStyles2(qe);return g.createElement(d.SelectContainer,v({},e,{className:E.cx(e.className,r.container)}),t)},ve=function(e){var t=e.className,r=e.children,n=d.useStyles2(qe);return g.createElement("div",{className:E.cx(t,n.valueContainer)},r)},qe=function(e){return{root:E.css({display:"flex",fontSize:12,alignItems:"center"}),label:E.css({color:e.colors.text.secondary,whiteSpace:"nowrap"}),container:E.css({background:"none",borderColor:"transparent"}),valueContainer:E.css({display:"flex",alignItems:"center",flex:"initial",color:e.colors.text.secondary,fontSize:12})}},Te=["","base","hovered","invalid","focused"],we=function(){return{root:E.css({display:"flex","> *":{"&:not(:first-child)":{marginLeft:-1},"&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:first-child):not(:last-child)":{borderRadius:0},position:"relative",zIndex:Te.indexOf("base"),"&:hover":{zIndex:Te.indexOf("hovered")},"&:focus-within":{zIndex:Te.indexOf("focused")}}}),invalidChild:E.css({zIndex:Te.indexOf("invalid")})}}},e=>{"use strict";e.exports=s},(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>i,__asyncDelegator:()=>S,__asyncGenerator:()=>O,__asyncValues:()=>R,__await:()=>b,__awaiter:()=>y,__classPrivateFieldGet:()=>P,__classPrivateFieldIn:()=>L,__classPrivateFieldSet:()=>_,__createBinding:()=>m,__decorate:()=>l,__esDecorate:()=>u,__exportStar:()=>h,__extends:()=>o,__generator:()=>g,__importDefault:()=>N,__importStar:()=>I,__makeTemplateObject:()=>A,__metadata:()=>d,__param:()=>a,__propKey:()=>c,__read:()=>v,__rest:()=>s,__runInitializers:()=>f,__setFunctionName:()=>p,__spread:()=>q,__spreadArray:()=>w,__spreadArrays:()=>T,__values:()=>E});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function l(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function a(e,t){return function(r,n){t(r,n,e)}}function u(e,t,r,n,o,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var l,a=n.kind,u="getter"===a?"get":"setter"===a?"set":"value",f=!t&&e?n.static?e:e.prototype:null,c=t||(f?Object.getOwnPropertyDescriptor(f,n.name):{}),p=!1,d=r.length-1;d>=0;d--){var y={};for(var g in n)y[g]="access"===g?{}:n[g];for(var g in n.access)y.access[g]=n.access[g];y.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var m=(0,r[d])("accessor"===a?{get:c.get,set:c.set}:c[u],y);if("accessor"===a){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(l=s(m.get))&&(c.get=l),(l=s(m.set))&&(c.set=l),(l=s(m.init))&&o.push(l)}else(l=s(m))&&("field"===a?o.push(l):c[u]=l)}f&&Object.defineProperty(f,n.name,c),p=!0}function f(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function c(e){return"symbol"==typeof e?e:"".concat(e)}function p(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function y(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function l(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,l)}a((n=n.apply(e,t||[])).next())}))}function g(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(l){return function(a){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&l[0]?n.return:l[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,l[1])).done)return o;switch(n=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,n=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){s=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){s.label=l[1];break}if(6===l[0]&&s.label<o[1]){s.label=o[1],o=l;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(l);break}o[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(e){l=[6,e],n=0}finally{r=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,a])}}}var m=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function h(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||m(t,e,r)}function E(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function q(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function T(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,l=i.length;s<l;s++,o++)n[o]=i[s];return n}function w(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function O(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||l(e,t)}))})}function l(e,t){try{(r=o[e](t)).value instanceof b?Promise.resolve(r.value.v).then(a,u):f(i[0][2],r)}catch(e){f(i[0][3],e)}var r}function a(e){l("next",e)}function u(e){l("throw",e)}function f(e,t){e(t),i.shift(),i.length&&l(i[0][0],i[0][1])}}function S(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:!1}:o?o(t):t}:o}}function R(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=E(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var C=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&m(t,e,r);return C(t,e),t}function N(e){return e&&e.__esModule?e:{default:e}}function P(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function _(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r}function L(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},e=>{"use strict";e.exports=o},,(e,t,r)=>{"use strict";r(4)},t=>{"use strict";t.exports=e},(e,t,r)=>{"use strict";var n=r(3),o=r(5),i=r(2),s=r(6),l=r(0),a=r(1);function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var f=u(l);function c(e){return"function"==typeof e}function p(e){return function(t){if(function(e){return c(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}var d,y=((d=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),d.prototype.constructor=d,d);function g(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var m=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,n,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var l=s.__values(i),a=l.next();!a.done;a=l.next()){a.value.remove(this)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else i.remove(this);var u=this.initialTeardown;if(c(u))try{u()}catch(e){o=e instanceof y?e.errors:[e]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var p=s.__values(f),d=p.next();!d.done;d=p.next()){var g=d.value;try{h(g)}catch(e){o=null!=o?o:[],e instanceof y?o=s.__spreadArray(s.__spreadArray([],s.__read(o)),s.__read(e.errors)):o.push(e)}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}}if(o)throw new y(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)h(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&g(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&g(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function h(e){c(e)?e():e.unsubscribe()}m.EMPTY;var E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},v={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,s.__spreadArray([e,t],s.__read(r)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function q(){}var T=function(e){function t(t){var r,n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,((r=t)instanceof m||r&&"closed"in r&&c(r.remove)&&c(r.add)&&c(r.unsubscribe))&&t.add(n)):n.destination=A,n}return s.__extends(t,e),t.create=function(e,t,r){return new S(e,t,r)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(m),w=Function.prototype.bind;function b(e,t){return w.call(e,t)}var O=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){R(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){R(e)}else R(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){R(e)}},e}(),S=function(e){function t(t,r,n){var o,i,s=e.call(this)||this;c(t)||!t?o={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:s&&E.useDeprecatedNextContext?((i=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},o={next:t.next&&b(t.next,i),error:t.error&&b(t.error,i),complete:t.complete&&b(t.complete,i)}):o=t;return s.destination=new O(o),s}return s.__extends(t,e),t}(T);function R(e){var t;t=e,v.setTimeout((function(){throw t}))}var A={closed:!0,next:q,error:function(e){throw e},complete:q};var C=function(e){function t(t,r,n,o,i,s){var l=e.call(this,t)||this;return l.onFinalize=i,l.shouldUnsubscribe=s,l._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,l._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,l}return s.__extends(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(T);function I(e,t){return p((function(r,n){var o,i,s,l=0;r.subscribe(new C(n,(function(r){n.next(e.call(t,r,l++))}),o,i,s))}))}var N=Object.defineProperty,P=Object.defineProperties,_=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,M=(e,t,r)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,k=(e,t)=>{for(var r in t||(t={}))D.call(t,r)&&M(e,r,t[r]);if(L)for(var r of L(t))x.call(t,r)&&M(e,r,t[r]);return e},F=(e,t)=>P(e,_(t));var B=Object.defineProperty,U=Object.defineProperties,K=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,W=(e,t,r)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,V=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&W(e,r,t[r]);if(G)for(var r of G(t))Y.call(t,r)&&W(e,r,t[r]);return e},H=(e,t)=>U(e,K(t));const Q=["started","submitted","running"],X=(e="")=>Q.includes(e);class $ extends n.DataSourceWithBackend{constructor(e,t=!1){super(e),this.runningQueries={},this.requestCounter=100,this.cancel=e=>{this.storeQuery(e,{shouldCancel:!0})},this.asyncQueryDataSupport=t}query(e){if(this.asyncQueryDataSupport){const t=this.filterQuery?e.targets.filter(this.filterQuery):e.targets;if(!t.length)return o.of({data:[]});const r=[];for(let n of t)n.hide||r.push(this.doSingle(n,e));return o.merge(...r)}return super.query(e)}storeQuery(e,t){const r=JSON.stringify(e),n=this.runningQueries[r]||{};this.runningQueries[r]=V(V({},n),t)}getQuery(e){const t=JSON.stringify(e);return this.runningQueries[t]||{}}removeQuery(e){const t=JSON.stringify(e);delete this.runningQueries[t]}doSingle(e,t){let r,s,l=[];return H(V({},t),{targets:[e],requestId:"aws_ts_"+this.requestCounter++}),{getNextQuery:t=>{var n,o;if(null==t.data?void 0:n.length){const n=null==t.data[0].meta?void 0:o.custom;if((e=>!("object"!=typeof e||!(null==e?void 0:e.hasOwnProperty("queryID"))||!(null==e?void 0:e.hasOwnProperty("status"))))(n)&&X(n.status))return n.queryID,n.status,this.storeQuery(e,{queryID:r}),H(V({},e),{queryID:r})}this.removeQuery(e)},query:e=>{const{range:t,targets:r,requestId:o,intervalMs:i,maxDataPoints:l}=e,[a]=r,u=V(V({},a),this.asyncQueryDataSupport?{meta:{queryFlow:"async"}}:{}),f={queries:[V(H(V({},u),{intervalMs:i,maxDataPoints:l,datasource:null==this?void 0:this.getRef(),datasourceId:this.id}),this.applyTemplateVariables(u,e.scopedVars))],range:t,from:t.from.valueOf().toString(),to:t.to.valueOf().toString()};let c={};X(s)&&{"X-Cache-Skip":!0};const p={method:"POST",url:"/api/ds/query",data:f,requestId:o,headers:c};return n.getBackendSrv().fetch(p).pipe(I((e=>({data:n.toDataQueryResponse(e).data}))))},process:e=>{for(const t of e)t.fields.length>0&&l.push(t);return l},shouldCancel:()=>{const{shouldCancel:t}=this.getQuery(e);return!!t},onCancel:()=>{r&&(this.removeQuery(e),this.postResource("cancel",{queryId:r}).catch((e=>{e.isHandled=!0})))}},new o.Observable((e=>{let t,r,n=i.LoadingState.Loading,o=1,s=1,l=!1;const f={next:r=>{r.state;let s=!1;if(n!==i.LoadingState.Error){u.getNextQuery(r);const e=u.shouldCancel();t&&e&&(e,void 0),!0}const l=u.process(r.data);s&&(t?(l.length&&l[0].length?i.LoadingState.Streaming:i.LoadingState.Loading,2*o>10?10:2*o):(i.LoadingState.Done,0)),e.next(F(k({},r),{data:l,state:n,key:a.requestId}))},error:t=>{e.error(t)},complete:()=>{if(r&&(r.unsubscribe(),void 0),t){const e=t;setTimeout((()=>{u.query(F(k({},a),{requestId:`${a.requestId}.${++s}`,targets:[e]})).subscribe(f),void 0}),1e3*o)}else e.complete()}};return u.query(a).subscribe(f),function(){f.complete(),(t||l)&&u.onCancel(),void 0}}));var a,u}}}],a={};function u(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return l[e](r,r.exports,u),r.exports}u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var r in t)u.o(t,r)&&!u.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var f={};return(()=>{"use strict";u.r(f),u.d(f,{plugin:()=>Be});var e=u(2),t=u(3);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,s=void 0,s=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===r(s)?s:String(s)),o)}var i,s}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(a,e);var t,r,s,l=i(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),l.apply(this,arguments)}return t=a,(r=[{key:"toDataQuery",value:function(e){return{refId:"TrinoDataSource-QueryVariable",rawSQL:e.query}}}])&&n(t.prototype,r),s&&n(t,s),Object.defineProperty(t,"prototype",{writable:!1}),a}(e.StandardVariableSupport),a=u(5);function c(e){return"function"==typeof e}function p(e){return function(t){if(function(e){return c(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}var d=u(6);var y,g=((y=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),y.prototype.constructor=y,y);function m(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var h=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,r,n,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var s=(0,d.__values)(i),l=s.next();!l.done;l=s.next()){l.value.remove(this)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else i.remove(this);var a=this.initialTeardown;if(c(a))try{a()}catch(e){o=e instanceof g?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var f=(0,d.__values)(u),p=f.next();!p.done;p=f.next()){var y=p.value;try{v(y)}catch(e){o=null!=o?o:[],e instanceof g?o=(0,d.__spreadArray)((0,d.__spreadArray)([],(0,d.__read)(o)),(0,d.__read)(e.errors)):o.push(e)}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}}if(o)throw new g(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)v(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&m(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&m(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();h.EMPTY;function E(e){return e instanceof h||e&&"closed"in e&&c(e.remove)&&c(e.add)&&c(e.unsubscribe)}function v(e){c(e)?e():e.unsubscribe()}var q={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},T={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=T.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,(0,d.__spreadArray)([e,t],(0,d.__read)(r))):setTimeout.apply(void 0,(0,d.__spreadArray)([e,t],(0,d.__read)(r)))},clearTimeout:function(e){var t=T.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function w(e){T.setTimeout((function(){var t=q.onUnhandledError;if(!t)throw e;t(e)}))}function b(){}var O=S("C",void 0,void 0);function S(e,t,r){return{kind:e,value:t,error:r}}var R=null;var A=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,E(t)&&t.add(r)):r.destination=D,r}return(0,d.__extends)(t,e),t.create=function(e,t,r){return new P(e,t,r)},t.prototype.next=function(e){this.isStopped?L(function(e){return S("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?L(S("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?L(O,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(h),C=Function.prototype.bind;function I(e,t){return C.call(e,t)}var N=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){_(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){_(e)}else _(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){_(e)}},e}(),P=function(e){function t(t,r,n){var o,i,s=e.call(this)||this;c(t)||!t?o={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:s&&q.useDeprecatedNextContext?((i=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},o={next:t.next&&I(t.next,i),error:t.error&&I(t.error,i),complete:t.complete&&I(t.complete,i)}):o=t;return s.destination=new N(o),s}return(0,d.__extends)(t,e),t}(A);function _(e){var t;q.useDeprecatedSynchronousErrorHandling?(t=e,q.useDeprecatedSynchronousErrorHandling&&R&&(R.errorThrown=!0,R.error=t)):w(e)}function L(e,t){var r=q.onStoppedNotification;r&&T.setTimeout((function(){return r(e,t)}))}var D={closed:!0,next:b,error:function(e){throw e},complete:b};function x(e,t,r,n,o){return new M(e,t,r,n,o)}var M=function(e){function t(t,r,n,o,i,s){var l=e.call(this,t)||this;return l.onFinalize=i,l.shouldUnsubscribe=s,l._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,l._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,l}return(0,d.__extends)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(A);function k(e){return t=function(){return e},p((function(e,n){var o=0;e.subscribe(x(n,(function(e){n.next(t.call(r,e,o++))})))}));var t,r}var F=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};var B="function"==typeof Symbol&&Symbol.observable||"@@observable";function U(e){return e}function K(e){return 0===e.length?U:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var G=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,o=this,i=(n=e)&&n instanceof A||function(e){return e&&c(e.next)&&c(e.error)&&c(e.complete)}(n)&&E(n)?e:new P(e,t,r);return function(e){if(q.useDeprecatedSynchronousErrorHandling){var t=!R;if(t&&(R={errorThrown:!1,error:null}),e(),t){var r=R,n=r.errorThrown,o=r.error;if(R=null,n)throw o}}else e()}((function(){var e=o,t=e.operator,r=e.source;i.add(t?t.call(i,r):r?o._subscribe(i):o._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=j(t))((function(t,n){var o=new P({next:function(t){try{e(t)}catch(e){n(e),o.unsubscribe()}},error:n,complete:t});r.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[B]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return K(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=j(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function j(e){var t;return null!==(t=null!=e?e:q.Promise)&&void 0!==t?t:Promise}var Y="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function W(e){if(e instanceof G)return e;if(null!=e){if(function(e){return c(e[B])}(e))return i=e,new G((function(e){var t=i[B]();if(c(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(F(e))return o=e,new G((function(e){for(var t=0;t<o.length&&!e.closed;t++)e.next(o[t]);e.complete()}));if(c(null==(n=e)?void 0:n.then))return r=e,new G((function(e){r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,w)}));if(function(e){return Symbol.asyncIterator&&c(null==e?void 0:e[Symbol.asyncIterator])}(e))return V(e);if(function(e){return c(null==e?void 0:e[Y])}(e))return t=e,new G((function(e){var r,n;try{for(var o=(0,d.__values)(t),i=o.next();!i.done;i=o.next()){var s=i.value;if(e.next(s),e.closed)return}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}e.complete()}));if(function(e){return c(null==e?void 0:e.getReader)}(e))return V(function(e){return(0,d.__asyncGenerator)(this,arguments,(function(){var t,r,n;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,(0,d.__await)(t.read())];case 3:return r=o.sent(),n=r.value,r.done?[4,(0,d.__await)(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,(0,d.__await)(n)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,r,n,o,i;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function V(e){return new G((function(t){(function(e,t){var r,n,o,i;return(0,d.__awaiter)(this,void 0,void 0,(function(){var s,l;return(0,d.__generator)(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),r=(0,d.__asyncValues)(e),a.label=1;case 1:return[4,r.next()];case 2:if((n=a.sent()).done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=a.sent(),o={error:l},[3,11];case 6:return a.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function H(e){return p((function(t,r){var n,o=null,i=!1;o=t.subscribe(x(r,void 0,void 0,(function(s){n=W(e(s,H(e)(t))),o?(o.unsubscribe(),o=null,n.subscribe(r)):i=!0}))),i&&(o.unsubscribe(),o=null,n.subscribe(r))}))}var Q=u(7);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==X(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===X(i)?i:String(i)),n)}var o,i}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ee(e);if(t){var o=ee(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Z(e)}(this,r)}}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}var te,re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(s,e);var r,n,o,i=J(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).variables=new l,t.interpolateQueryStr=t.interpolateQueryStr.bind(Z(t)),t}return r=s,(n=[{key:"testDatasource",value:function(){return(0,a.lastValueFrom)((0,t.getBackendSrv)().fetch({url:"/api/ds/query",method:"POST",requestId:"A",data:{from:"5m",to:"now",queries:[{refId:"A",key:"A",intervalMs:1,maxDataPoints:1,datasource:this.getRef(),rawSQL:"SELECT 1",format:0}]}}).pipe(k({status:"success",message:"Database Connection OK"}),H((function(e){return(0,a.of)({status:"error",message:e.error?e.error:e.statusText?"Query error: "+e.statusText:"Error connecting to Trino"})}))))}},{key:"applyTemplateVariables",value:function(e,r){return e.rawSQL=(0,t.getTemplateSrv)().replace(e.rawSQL,r,this.interpolateQueryStr),e}},{key:"interpolateQueryStr",value:function(e,t,r){return t.multi||t.includeAll?"string"==typeof e?this.quoteLiteral(e):(0,Q.map)(e,this.quoteLiteral).join(","):this.escapeLiteral(e)}},{key:"quoteIdentifier",value:function(e){return'"'+String(e).replace(/"/g,'""')+'"'}},{key:"quoteLiteral",value:function(e){return"'"+String(e).replace(/'/g,"''")+"'"}},{key:"escapeLiteral",value:function(e){return String(e).replace(/'/g,"''")}}])&&$(r.prototype,n),o&&$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),s}(t.DataSourceWithBackend),ne=u(0),oe=u.n(ne),ie=u(1);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},le.apply(this,arguments)}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===se(i)?i:String(i)),n)}var o,i}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ce(e);if(t){var o=ce(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}var pe,de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(i,e);var t,r,n,o=fe(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e,t,r=this.props,n=r.options,o=r.onOptionsChange;return oe().createElement("div",{className:"gf-form-group"},oe().createElement(ie.DataSourceHttpSettings,{defaultUrl:"http://localhost:8080",dataSourceConfig:n,onChange:o}),te||(te=oe().createElement("h3",{className:"page-heading"},"Trino")),oe().createElement("div",{className:"gf-form-group"},oe().createElement("div",{className:"gf-form-inline"},oe().createElement(ie.InlineField,{label:"Impersonate logged in user",tooltip:"If enabled, set the Trino session user to the current Grafana user"},oe().createElement(ie.InlineSwitch,{id:"trino-settings-enable-impersonation",value:null!==(e=null===(t=n.jsonData)||void 0===t?void 0:t.enableImpersonation)&&void 0!==e&&e,onChange:function(e){o(le({},n,{jsonData:le({},n.jsonData,{enableImpersonation:e.target.checked})}))}})))))}}])&&ae(t.prototype,r),n&&ae(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(ne.PureComponent);!function(e){e[e.TimeSeries=0]="TimeSeries",e[e.Table=1]="Table",e[e.Logs=2]="Logs"}(pe||(pe={}));var ye=[{label:"Time Series",value:pe.TimeSeries},{label:"Table",value:pe.Table},{label:"Logs",value:pe.Logs}],ge={rawSQL:"SELECT\n  $__timeGroup(time_column, '1h'),\n  value_column as value,\n  series_column as metric\nFROM\n  catalog_name.schema_name.table_name\nWHERE\n  $__timeFilter(time_column)\nGROUP BY\n  1, 3\nORDER BY\n  1\n",format:pe.TimeSeries},me=(e=>(e.Keys="keys",e.Credentials="credentials",e.Default="default",e.EC2IAMRole="ec2_iam_role",e.ARN="arn",e))(me||{});me.EC2IAMRole,me.Default,me.Keys,me.Credentials;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var he=Object.defineProperty,Ee=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,qe=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,be=(e,t,r)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Oe=(e,t)=>{for(var r in t||(t={}))Te.call(t,r)&&be(e,r,t[r]);if(qe)for(var r of qe(t))we.call(t,r)&&be(e,r,t[r]);return e},Se=(e,t)=>Ee(e,ve(t));function Re(e){const{getSuggestions:t,query:r}=e,{rawSQL:n}=(0,Q.defaults)(e.query,{rawSQL:""}),o=(0,ne.useRef)([]);return(0,ne.useEffect)((()=>{o.current=t(r)}),[t,r]),oe().createElement(ie.CodeEditor,Oe({language:e.language,value:n,onBlur:t=>{const r=Se(Oe({},e.query),{rawSQL:t});e.onChange(r),e.onRunQuery()},showMiniMap:!1,showLineNumbers:!0,getSuggestions:()=>o.current,height:"240px"},e.editorProps))}u(9),u(11);var Ae=Object.defineProperty,Ce=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,Le=(e,t,r)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,De=(e,t)=>{for(var r in t||(t={}))Pe.call(t,r)&&Le(e,r,t[r]);if(Ne)for(var r of Ne(t))_e.call(t,r)&&Le(e,r,t[r]);return e},xe=(e,t)=>Ce(e,Ie(t));function Me(e){return oe().createElement(ie.InlineField,{label:"Format as",labelWidth:11},oe().createElement(ie.Select,{"aria-label":"Format as",options:e.options,value:e.query.format,onChange:t=>{var r;e.onChange(xe(De({},e.query),{format:t.value||0})),null==(r=e.onRunQuery)||r.call(e)},className:"width-12",menuShouldPortal:!0}))}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var ke;function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fe.apply(this,arguments)}var Be=new e.DataSourcePlugin(re).setConfigEditor(de).setQueryEditor((function(e){var t=Fe({},ge,e.query);return oe().createElement(oe().Fragment,null,oe().createElement("div",{className:"gf-form-group"},ke||(ke=oe().createElement("h6",null,"Frames")),oe().createElement(Me,{query:e.query,options:ye,onChange:e.onChange,onRunQuery:e.onRunQuery})),oe().createElement("div",{style:{minWidth:"400px",marginLeft:"10px",flex:1}},oe().createElement(Re,{language:"sql",query:t,onChange:e.onChange,onRunQuery:e.onRunQuery,getSuggestions:function(){return[]}})))}))})(),f})()));
//# sourceMappingURL=module.js.map